# OpenWAMコンポーネントリファレンス

## 概要

このリファレンスは、OpenWAM Webアプリケーションで使用可能な全コンポーネントの詳細な説明を提供します。各コンポーネントの物理的意味、パラメータ、使用方法、制限事項について説明します。

## 目次

1. [パイプ（1DPipes）](#パイプ1dpipes)
2. [境界条件（Boundaries）](#境界条件boundaries)
3. [プレナム（0Dモデル）](#プレナム0dモデル)
4. [バルブ（Connections）](#バルブconnections)
5. [ターボチャージャー](#ターボチャージャー)
6. [エンジン](#エンジン)
7. [制御システム](#制御システム)
8. [DPF（ディーゼル微粒子フィルター）](#dpfディーゼル微粒子フィルター)

## パイプ（1DPipes）

### 1Dパイプ (TTubo)

**物理的意味**: 1次元ガス動力学方程式に基づく基本的なパイプ要素

**OpenWAMクラス**: `TTubo`

#### 主要パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| numeroTubo | - | パイプ識別番号 | 1以上 | 1 |
| nodoIzq | - | 左端ノード番号 | 1以上 | 1 |
| nodoDer | - | 右端ノード番号 | 1以上 | 2 |
| nin | - | 計算セル数 | 3以上 | 10 |
| longitudTotal | m | パイプ全長 | 0.001以上 | 1.0 |
| mallado | m | メッシュサイズ | 0.001以上 | 0.1 |
| nTramos | - | セクション数 | 1以上 | 1 |
| tipoMallado | - | メッシュタイプ | distance/angular | distance |

#### 幾何パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| lTramo[i] | m | セクションi の長さ | 0.001以上 |
| dExtTramo[i] | m | セクションi の外径 | 0.001以上 |

#### 熱伝達・摩擦パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| friccion | - | 摩擦係数 | 0以上 | 0.02 |
| tipoTransCal | - | 熱伝達タイプ | 0-3 | 1 |
| coefAjusFric | - | 摩擦調整係数 | 0.1-10 | 1.0 |
| coefAjusTC | - | 熱伝達調整係数 | 0.1-10 | 1.0 |

#### 壁面材料パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| espesorPrin | m | 主壁厚 | 0.0001以上 | 0.002 |
| densidadPrin | kg/m³ | 主壁密度 | 100以上 | 7800 |
| calEspPrin | J/kg·K | 主壁比熱 | 100以上 | 460 |
| conductPrin | W/m·K | 主壁熱伝導率 | 0.1以上 | 50 |

#### 冷却・初期条件

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| tRefrigerante | K | 冷却剤温度 | 200-500 | 293 |
| tipRefrig | - | 冷却剤タイプ | air/water | air |
| tini | K | 初期温度 | 200-1000 | 293 |
| pini | Pa | 初期圧力 | 1000以上 | 101325 |
| velMedia | m/s | 初期平均速度 | -100-100 | 0 |

#### 使用上の注意

- **計算セル数**: 多すぎると計算時間が増加、少なすぎると精度が低下
- **メッシュサイズ**: 音速と時間刻みから決まるCFL条件を考慮
- **壁面層**: 複数層の壁面構造も設定可能

### 同心円パイプ (TConcentrico)

**物理的意味**: 内管と外管からなる二重管構造のパイプ

**OpenWAMクラス**: `TConcentrico`

#### 追加パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| dIntInterior | m | 内管内径 | 0.001以上 |
| dExtInterior | m | 内管外径 | dIntInterior以上 |
| dIntExterior | m | 外管内径 | dExtInterior以上 |
| dExtExterior | m | 外管外径 | dIntExterior以上 |

## 境界条件（Boundaries）

### 開放端（大気） (TCCDescargaExtremoAbierto)

**物理的意味**: 大気圧に開放された端部境界条件

**OpenWAMクラス**: `TCCDescargaExtremoAbierto`

**境界条件タイプ**: `nmOpenEndAtmosphere` (0)

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| numeroCC | - | 境界条件番号 | 1以上 | 1 |
| tubo | - | 接続パイプ番号 | 1以上 | 1 |
| nodo | - | 接続ノード番号 | 1以上 | 1 |
| sentido | - | 流れ方向 | 1/-1 | 1 |
| presionExterior | Pa | 外部圧力 | 1000以上 | 101325 |
| temperaturaExterior | K | 外部温度 | 200-500 | 293 |

#### 使用例

- エキゾーストパイプの出口
- インテークの入口
- 大気への開放部

### 閉端 (TCCExtremoCerrado)

**物理的意味**: 完全に閉じられた端部（流れなし）

**OpenWAMクラス**: `TCCExtremoCerrado`

**境界条件タイプ**: `nmClosedEnd` (3)

#### パラメータ

| パラメータ | 単位 | 説明 |
|-----------|------|------|
| numeroCC | - | 境界条件番号 |
| tubo | - | 接続パイプ番号 |
| nodo | - | 接続ノード番号 |

#### 使用例

- シリンダーヘッド
- 配管の行き止まり
- 測定用プローブ取り付け部

### 無反射端 (TCCExtremoAnecoico)

**物理的意味**: 圧力波の反射がない理想的な端部

**OpenWAMクラス**: `TCCExtremoAnecoico`

**境界条件タイプ**: `nmAnechoicEnd` (4)

#### パラメータ

| パラメータ | 単位 | 説明 | デフォルト値 |
|-----------|------|------|-------------|
| numeroCC | - | 境界条件番号 | 1 |
| tubo | - | 接続パイプ番号 | 1 |
| nodo | - | 接続ノード番号 | 1 |
| presionReferencia | Pa | 基準圧力 | 101325 |

#### 使用例

- 実験装置での理想的な境界
- 長い配管の遠端近似
- 消音器の理想的な出口

### パルス端 (TCCPulso)

**物理的意味**: 時間変化する圧力パルスを入力する境界条件

**OpenWAMクラス**: `TCCPulso`

**境界条件タイプ**: `nmIncidentPressurWave` (5)

#### パラメータ

| パラメータ | 単位 | 説明 |
|-----------|------|------|
| numeroCC | - | 境界条件番号 |
| tubo | - | 接続パイプ番号 |
| nodo | - | 接続ノード番号 |
| amplitud | Pa | パルス振幅 |
| frecuencia | Hz | パルス周波数 |
| faseInicial | rad | 初期位相 |

#### 使用例

- 実験での圧力パルス入力
- 音響試験
- システム応答解析

### 圧力損失 (TCCPerdidadePresion)

**物理的意味**: 線形または二次の圧力損失を模擬

**OpenWAMクラス**: `TCCPerdidadePresion`

**境界条件タイプ**: 
- `nmLinearPressureLoss` (7)
- `nmQuadraticPressureLoss` (8)

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroCC | - | 境界条件番号 | 1以上 |
| coeficientePerdida | - | 損失係数 | 0以上 |
| tipoPerdida | - | 損失タイプ | linear/quadratic |

#### 使用例

- エアフィルター
- 熱交換器
- オリフィス板

## プレナム（0Dモデル）

### 定容積プレナム (TDepVolCte)

**物理的意味**: 容積が一定のチャンバー（0次元モデル）

**OpenWAMクラス**: `TDepVolCte`

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| numeroDeposito | - | プレナム番号 | 1以上 | 1 |
| volumen0 | m³ | 容積 | 1e-6以上 | 0.001 |
| presion0 | Pa | 初期圧力 | 1000以上 | 101325 |
| temperatura0 | K | 初期温度 | 200-1000 | 293 |
| masa0 | kg | 初期質量 | 1e-6以上 | 自動計算 |

#### 熱伝達パラメータ

| パラメータ | 単位 | 説明 | デフォルト値 |
|-----------|------|------|-------------|
| coefTransCal | W/m²·K | 熱伝達係数 | 10 |
| areaTransCal | m² | 熱伝達面積 | 0.1 |
| tempPared | K | 壁面温度 | 293 |

#### 使用例

- インテークマニホールド
- エキゾーストマニホールド
- サージタンク
- インタークーラー

### 可変容積プレナム (TDepVolVariable)

**物理的意味**: 容積が時間変化するチャンバー

**OpenWAMクラス**: `TDepVolVariable`

#### 追加パラメータ

| パラメータ | 単位 | 説明 |
|-----------|------|------|
| tipoVariacion | - | 変化タイプ（sinusoidal/table） |
| amplitudVariacion | m³ | 容積変化振幅 |
| frecuenciaVariacion | Hz | 変化周波数 |
| faseInicial | rad | 初期位相 |

#### 使用例

- 可変容積チャンバー
- アクティブ消音器
- 可変インテークシステム

### シンプルタービン (TTurbinaSimple)

**物理的意味**: 基本的なタービンモデル

**OpenWAMクラス**: `TTurbinaSimple`

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroTurbina | - | タービン番号 | 1以上 |
| diametroRotor | m | ローター直径 | 0.01以上 |
| velocidadRotacion | rpm | 回転速度 | 0以上 |
| eficienciaIsentropica | - | 等エントロピー効率 | 0-1 |
| relacionExpansion | - | 膨張比 | 1以上 |

#### 使用例

- ターボチャージャータービン
- 排気タービン
- 膨張タービン

## バルブ（Connections）

### 固定CD (TCDFijo)

**物理的意味**: 固定流量係数を持つバルブ

**OpenWAMクラス**: `TCDFijo`

**バルブタイプ**: `nmCDFijo` (0)

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| numeroValvula | - | バルブ番号 | 1以上 | 1 |
| tubo | - | 接続パイプ番号 | 1以上 | 1 |
| nodo | - | 接続ノード番号 | 1以上 | 1 |
| CD | - | 流量係数 | 0-1 | 0.6 |
| diametroTubo | m | 基準直径 | 0.001以上 | 0.05 |
| sentido | - | 流れ方向 | 1/-1 | 1 |

#### 使用例

- オリフィス
- 固定絞り
- 校正用基準バルブ

### 4Tバルブ (TValvula4T)

**物理的意味**: 4ストロークエンジンの吸排気バルブ

**OpenWAMクラス**: `TValvula4T`

**バルブタイプ**: `nmValvula4T` (1)

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroValvula | - | バルブ番号 | 1以上 |
| diametroValvula | m | バルブ直径 | 0.001以上 |
| alzadaMaxima | m | 最大リフト | 0.001以上 |
| anguloApertura | deg | 開弁角度 | 0-360 |
| anguloCierre | deg | 閉弁角度 | 0-360 |
| tipoLeva | - | カムプロファイル | 1-5 |

#### リフト特性

| パラメータ | 単位 | 説明 |
|-----------|------|------|
| perfilLeva | - | カムプロファイルタイプ |
| duracionApertura | deg | 開弁期間 |
| rampasApertura | deg | 開弁ランプ期間 |

#### 使用例

- 吸気バルブ
- 排気バルブ
- EGRバルブ

### リードバルブ (TLamina)

**物理的意味**: 一方向流れを許可するリードバルブ

**OpenWAMクラス**: `TLamina`

**バルブタイプ**: `nmLamina` (2)

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroValvula | - | バルブ番号 | 1以上 |
| areaEfectiva | m² | 有効面積 | 1e-6以上 |
| presionApertura | Pa | 開弁圧力差 | 0以上 |
| constElastica | N/m | バネ定数 | 0以上 |
| masaLamina | kg | リード質量 | 1e-6以上 |

#### 使用例

- 2ストロークエンジンリードバルブ
- 逆止弁
- 圧力リリーフバルブ

### ウェストゲート (TWasteGate)

**物理的意味**: ターボチャージャーのウェストゲートバルブ

**OpenWAMクラス**: `TWasteGate`

**バルブタイプ**: `nmWasteGate` (6)

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroValvula | - | バルブ番号 | 1以上 |
| presionApertura | Pa | 開弁圧力 | 1000以上 |
| CDMaximo | - | 最大流量係数 | 0-1 |
| tiempoRespuesta | s | 応答時間 | 0.001以上 |
| tipoControl | - | 制御タイプ | pressure/electronic |

#### 使用例

- ターボチャージャーウェストゲート
- 過給圧制御バルブ
- バイパスバルブ

## ターボチャージャー

### ターボチャージャー軸 (TEjeTurbogrupo)

**物理的意味**: タービンとコンプレッサーを結ぶ回転軸

**OpenWAMクラス**: `TEjeTurbogrupo`

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| numeroEje | - | 軸番号 | 1以上 | 1 |
| inercia | kg·m² | 回転慣性 | 1e-6以上 | 1e-5 |
| friccion | N·m·s | 摩擦係数 | 0以上 | 1e-6 |
| velocidadInicial | rpm | 初期回転速度 | 0以上 | 1000 |

#### 使用例

- ターボチャージャー軸
- 機械式過給機軸

### コンプレッサー (TCompresorDep)

**物理的意味**: 遠心コンプレッサーモデル

**OpenWAMクラス**: `TCompresorDep`

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroCompresor | - | コンプレッサー番号 | 1以上 |
| eje | - | 接続軸番号 | 1以上 |
| diametroRotor | m | ローター直径 | 0.01以上 |
| numeroAlabes | - | 羽根数 | 3以上 |
| anguloAlabes | deg | 羽根角度 | 0-90 |

#### 性能マップ

| パラメータ | 単位 | 説明 |
|-----------|------|------|
| mapaEficiencia | - | 効率マップファイル |
| mapaPresion | - | 圧力比マップファイル |
| mapaFlujo | - | 流量マップファイル |

#### 使用例

- ターボチャージャーコンプレッサー
- 機械式過給機
- 産業用コンプレッサー

## エンジン

### エンジンブロック (TBloqueMotor)

**物理的意味**: エンジン全体の制御と管理

**OpenWAMクラス**: `TBloqueMotor`

#### 基本パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| tipoMotor | - | エンジンタイプ | 2T/4T | 4T |
| numeroCilindros | - | シリンダー数 | 1以上 | 4 |
| regimen | rpm | エンジン回転数 | 100以上 | 2000 |
| ordenEncendido | - | 点火順序 | 配列 | [1,3,4,2] |

#### 幾何パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| carrera | m | ストローク | 0.01以上 |
| diametro | m | ボア径 | 0.01以上 |
| longitudBiela | m | コンロッド長 | 0.05以上 |
| volumenCamaraCombustion | m³ | 燃焼室容積 | 1e-6以上 |
| relacionCompresion | - | 圧縮比 | 5以上 |

#### 使用例

- 4ストロークエンジン
- 2ストロークエンジン
- ディーゼルエンジン
- ガソリンエンジン

### 4Tシリンダー (TCilindro4T)

**物理的意味**: 4ストロークエンジンのシリンダー

**OpenWAMクラス**: `TCilindro4T`

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroCilindro | - | シリンダー番号 | 1以上 |
| faseEncendido | deg | 点火位相 | 0-720 |
| masaCombustible | kg/cycle | 燃料質量 | 0以上 |
| relacionAireCombustible | - | 空燃比 | 10以上 |

#### 燃焼パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| duracionCombustion | deg | 燃焼期間 | 10-100 |
| anguloInicioQuemado | deg | 燃焼開始角 | -30-30 |
| fraccionQuemadoRapido | - | 急速燃焼割合 | 0-1 |

#### 使用例

- ガソリンエンジンシリンダー
- ディーゼルエンジンシリンダー
- 天然ガスエンジンシリンダー

## 制御システム

### センサー (TSensor)

**物理的意味**: 物理量を測定するセンサー

**OpenWAMクラス**: `TSensor`

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroSensor | - | センサー番号 | 1以上 |
| tipoMedicion | - | 測定タイプ | pressure/temperature/flow |
| ubicacion | - | 測定位置 | tubo/deposito |
| numeroElemento | - | 要素番号 | 1以上 |
| nodoMedicion | - | 測定ノード | 1以上 |

#### フィルタリング

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| constanteTiempo | s | 時定数 | 0以上 |
| tipoFiltro | - | フィルタータイプ | lowpass/highpass |
| frecuenciaCorte | Hz | カットオフ周波数 | 0以上 |

#### 使用例

- 圧力センサー
- 温度センサー
- 流量センサー
- 回転数センサー

### PIDコントローラー (TPIDController)

**物理的意味**: PID制御アルゴリズム

**OpenWAMクラス**: `TPIDController`

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 | デフォルト値 |
|-----------|------|------|------|-------------|
| numeroControlador | - | コントローラー番号 | 1以上 | 1 |
| Kp | - | 比例ゲイン | 0以上 | 1.0 |
| Ki | - | 積分ゲイン | 0以上 | 0.1 |
| Kd | - | 微分ゲイン | 0以上 | 0.01 |
| setpoint | - | 設定値 | 任意 | 0 |

#### 制限値

| パラメータ | 単位 | 説明 |
|-----------|------|------|
| salidaMinima | - | 最小出力値 |
| salidaMaxima | - | 最大出力値 |
| limiteIntegral | - | 積分項制限 |

#### 使用例

- ウェストゲート制御
- EGR制御
- 燃料噴射制御
- 点火時期制御

## DPF（ディーゼル微粒子フィルター）

### DPF (TDPF)

**物理的意味**: ディーゼル微粒子フィルター

**OpenWAMクラス**: `TDPF`

#### パラメータ

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| numeroDPF | - | DPF番号 | 1以上 |
| longitud | m | フィルター長 | 0.01以上 |
| diametro | m | フィルター直径 | 0.01以上 |
| porosidad | - | 多孔度 | 0-1 |
| permeabilidad | m² | 透過率 | 1e-15以上 |

#### 粒子捕集

| パラメータ | 単位 | 説明 | 範囲 |
|-----------|------|------|------|
| eficienciaCaptura | - | 捕集効率 | 0-1 |
| cargaInicialParticulas | kg/m³ | 初期粒子負荷 | 0以上 |
| cargaMaximaParticulas | kg/m³ | 最大粒子負荷 | 0以上 |

#### 再生パラメータ

| パラメータ | 単位 | 説明 |
|-----------|------|------|
| temperaturaRegeneracion | K | 再生温度 |
| tiempoRegeneracion | s | 再生時間 |
| frecuenciaRegeneracion | km | 再生間隔 |

#### 使用例

- ディーゼルエンジンDPF
- 産業用フィルター
- 排気後処理システム

## 接続ルールと制約

### 基本接続ルール

1. **パイプ接続**
   - パイプ同士: 直接接続可能
   - パイプ-境界条件: 端部のみ接続可能
   - パイプ-プレナム: 専用境界条件経由

2. **ノード制約**
   - 1つのノードに最大3つの要素まで接続可能
   - 同一コンポーネント内で同じノード番号は使用不可

3. **物理的制約**
   - 流れ方向の整合性
   - 圧力・温度の連続性
   - 質量保存則の満足

### バリデーションルール

#### 必須チェック項目

1. **モデル完全性**
   - 全パイプに境界条件が設定されている
   - 孤立したコンポーネントがない
   - 循環参照がない

2. **パラメータ妥当性**
   - 物理的に意味のある値範囲
   - 単位の整合性
   - 依存関係の満足

3. **数値安定性**
   - CFL条件の満足
   - 収束条件の設定
   - 計算精度の確保

## 使用上の注意事項

### 一般的な注意点

1. **計算精度**
   - メッシュサイズと時間刻みの関係
   - 収束判定基準の設定
   - 数値拡散の影響

2. **物理的妥当性**
   - 実際の物理現象との対応
   - 仮定と制限の理解
   - 結果の妥当性確認

3. **計算効率**
   - 不要な詳細化の回避
   - 並列計算の活用
   - メモリ使用量の最適化

### トラブルシューティング

#### よくある問題

1. **収束しない**
   - 時間刻みを小さくする
   - 初期条件を調整する
   - 境界条件を見直す

2. **非物理的な結果**
   - パラメータ設定を確認
   - モデル構造を見直す
   - 境界条件の妥当性をチェック

3. **計算が遅い**
   - メッシュ数を最適化
   - 並列計算を有効化
   - 不要なコンポーネントを削除

---

このリファレンスは OpenWAM Webアプリケーション v1.0 に基づいています。
詳細な理論的背景については、OpenWAMの公式ドキュメントを参照してください。